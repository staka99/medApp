// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract AccessControl {

    // ------------------------ OVLAŠĆENJE DOKTORU ------------------------
    // Mappiranje pacijenata na doktore koji imaju pristup
    mapping(address => mapping(address => bool)) public grantedAccesses;

    // Funkcija za dodeljivanje pristupa doktoru
    function grantAccess(address _doctor) public {
        grantedAccesses[msg.sender][_doctor] = true;
    }

    // Funkcija za proveru da li je pristup dodeljen
    function isAccessGranted(address _doctor) public view returns (bool) {
        return grantedAccesses[msg.sender][_doctor];
    }

    // Funkcija za proveru da li je pristup dodeljen od strane doktora
    function hasAccess(address _patient) public view returns (bool) {
        return grantedAccesses[_patient][msg.sender];
    }

    // Funkcija za oduzimanje pristupa doktoru
    function revokeAccess(address _doctor) public {
        grantedAccesses[msg.sender][_doctor] = false;
    }

    // ------------------------ OVLAŠĆENJE DRUGOJ OSOBI ------------------------
    // Mappiranje pacijenata na pacijente koji imaju ovlašćenje
    mapping(address => mapping(address => bool)) public allowedPermission;

    function allowPermission(address _person) public {
        allowedPermission[msg.sender][_person] = true;
    }

    function hasPermission(address _person) public view returns (bool) {
        return allowedPermission[_person][msg.sender];
    }

}
